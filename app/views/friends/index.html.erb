<%= render 'components/header', path: root_path %>
<h1><%=@user.pet.pet_name %>'s Besties</h1>
<div class="friends-main">
<div class="section friends-management">
<h4> Friends</h4>
    <% if @user.friends.exists? != true %>
<h6>You have no Besties, go find some!</h6>
    <% else %>
    <% @friends.each do |friend| %>
        <%= link_to  friend.pet.pet_name, photos_show_path(friend) %>
        <% end %>
    <% end %>
<h4> Requests</h4>
    <% if @user.friend_requests? %>
        <% @requests.each do |friend| %>
        <%= friend.pet.pet_name%>
        <%= form_tag ({controller: 'friends', action: 'add', method: 'post', id: friend.id}) do %>
        <input class='button button-sm primary-green' type=submit value='Yes!'>
        <% end %>
        <%= form_tag ({controller: 'friends', action: 'reject', method: 'post', id: friend.id}) do %>
            <input class='button button-sm secondary-pink' type=submit value='Nope'>
            <% end %>
        <% end %>
    
    <% else %>
        <h6>Woof, nothing to see here</h6>
    <% end %>
<h4> Pending</h4>
    <% if @user.requested_friends? %>
        <% @pending.each do |friend| %>
        <%= friend.pet.pet_name %>
        <% end %>
    <% else %>
        <h6>Nothing, nada, zilt</h6>
    <% end %>
</div>
<div class="section friends-find">
<h4> Find Friends </h4>
<p><% Pet.all.each do |pet| %></p>
    <% if !current_user.pending_friends.include?(pet.user) && pet.pet_name != current_user.pet.pet_name%>
        <%= pet.pet_name %>
        <%= form_tag ({controller: 'friends', action: 'create', method: 'post', id: pet.user.id}) do %>
            <input class='button button-md primary-green' type=submit value='Request'>
            <% end %>
        <% end %>
    <% end %>
</div>

